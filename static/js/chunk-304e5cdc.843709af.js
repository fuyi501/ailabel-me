(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-304e5cdc"],{"53ca":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function r(t){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}},"7ed9":function(t,e,i){"use strict";i("8a2d")},"8a2d":function(t,e,i){},a434:function(t,e,i){"use strict";var r=i("23e7"),a=i("23cb"),s=i("a691"),l=i("50c4"),n=i("7b0b"),o=i("65f0"),u=i("8418"),c=i("1dde"),p=c("splice"),d=Math.max,f=Math.min,h=9007199254740991,g="Maximum allowed length exceeded";r({target:"Array",proto:!0,forced:!p},{splice:function(t,e){var i,r,c,p,m,b,v=n(this),y=l(v.length),w=a(t,y),C=arguments.length;if(0===C?i=r=0:1===C?(i=0,r=y-w):(i=C-2,r=f(d(s(e),0),y-w)),y+i-r>h)throw TypeError(g);for(c=o(v,r),p=0;p<r;p++)m=w+p,m in v&&u(c,p,v[m]);if(c.length=r,i<r){for(p=w;p<y-r;p++)m=p+r,b=p+i,m in v?v[b]=v[m]:delete v[b];for(p=y;p>y-r+i;p--)delete v[p-1]}else if(i>r)for(p=y-r;p>w;p--)m=p+r-1,b=p+i-1,m in v?v[b]=v[m]:delete v[b];for(p=0;p<i;p++)v[p+w]=arguments[p+2];return v.length=y-r+i,c}})},b1ca:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d2p-cropper-uploader",class:{"is-disabled":t.disabled}},[r("div",{staticClass:"image-list"},[t._l(t.list,(function(e,a){return r("div",{key:a,staticClass:"image-item"},[r("el-image",{staticClass:"image",attrs:{src:e.dataUrl?e.dataUrl:e.url,"data-src":e.url,"preview-src-list":t._urlList,fit:"contain"}},[r("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[r("img",{attrs:{src:i("3849")}})])]),t.disabled?t._e():r("div",{staticClass:"delete"},[r("i",{staticClass:"el-icon-delete",on:{click:function(i){return t.removeImage(a,e)}}})]),"uploading"===e.status?r("div",{staticClass:"status-uploading"},[r("el-progress",{attrs:{type:"circle",percentage:e.progress,width:70}})],1):"done"===e.status?r("div",{staticClass:"status-done"},[r("i",{staticClass:"el-icon-upload-success el-icon-check"})]):t._e()],1)})),t.limit<=0||t.limit>t.list.length?r("div",{staticClass:"image-item image-plus",on:{click:t.addNewImage}},[r("i",{staticClass:"el-icon-plus cropper-uploader-icon"})]):t._e()],2),r("d2p-cropper",{ref:"cropper",attrs:{title:t.title,cropperHeight:t.cropperHeight,dialogWidth:t.dialogWidth,accept:t.accept,uploadTip:t.uploadTip,maxSize:t.maxSize,cropper:t.cropper,output:"all"},on:{done:t.cropComplete}})],1)},a=[],s=i("1da1"),l=i("b85c"),n=i("53ca"),o=(i("96cf"),i("a9e3"),i("a434"),i("b0c0"),i("c80b")),u=i("0e05"),c=i("0e00"),p=i("1d2a"),d={name:"d2p-cropper-uploader",mixins:[c["a"].inputBase],components:{D2pCropper:o["default"]},props:{value:{type:[String,Array]},type:{type:String},uploadTip:{type:String},title:String,cropperHeight:{type:[String,Number]},dialogWidth:{type:[String,Number],default:"50%"},maxSize:{type:Number,default:5},limit:{type:Number,default:1},accept:{type:String,default:".jpg, .jpeg, .png, .gif, .webp"},cropper:{type:Object},uploader:{type:Object},buildUrl:{type:Function,default:function(t,e){return"object"===Object(n["a"])(t)?e.url:t}}},data:function(){return{index:void 0,list:[]}},watch:{value:function(t){this.$emit("change",t),t!==this.emitValue&&this.initValue(t)}},created:function(){this.emitValue=this.value,this.initValue(this.value)},computed:{_urlList:function(){var t=[];if(this.list){var e,i=Object(l["a"])(this.list);try{for(i.s();!(e=i.n()).done;){var r=e.value;t.push(r.url)}}catch(a){i.e(a)}finally{i.f()}}return t}},methods:{initValue:function(t){var e=[];if(null!=t&&""!==t){if("string"===typeof t)e.push({url:this.buildUrl(t),value:t,status:"done"});else{var i,r=Object(l["a"])(t);try{for(r.s();!(i=r.n()).done;){var a=i.value;e.push({url:this.buildUrl(a),value:a,status:"done"})}}catch(s){r.e(s)}finally{r.f()}}this.$set(this,"list",e)}else this.$set(this,"list",e)},addNewImage:function(){this.disabled||(this.index=void 0,this.$refs.cropper.clear(),this.$refs.cropper.open())},removeImage:function(t,e){this.list.splice(t,1),this.emit()},isHasUploadingItem:function(){var t=this.list;if(t&&t.length>0){var e,i=Object(l["a"])(t);try{for(i.s();!(e=i.n()).done;){var r=e.value;if("uploading"===r.status)return!0}}catch(a){i.e(a)}finally{i.f()}}return!1},cropComplete:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function i(){var r,a,s,l,n,o,u,c;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.blob,a=t.dataUrl,s=t.file,l={url:void 0,dataUrl:a,status:"uploading",progress:0},n=function(t){l.progress=t.percent},o=function(t){l.status="error",l.message="文件上传出错:"+t.message,p["a"].debug(t)},p["a"].debug("blob:",r),u={file:r,fileName:s.name,onProgress:n,onError:o},e.list.push(l),i.next=11,e.doUpload(u);case 11:c=i.sent,l.url=e.buildUrl(c.url),l.value=c.url,l.status="done",e.emit();case 16:case"end":return i.stop()}}),i)})))()},doUpload:function(t){var e=this;return t.config=this.uploader,this.getUploader().then((function(i){return i.upload(t).then((function(t){return null!=e.suffix&&(t.url+=e.suffix),t}))}))},getUploader:function(){var t=this.type;return null!=this.uploader&&null!=this.uploader.type&&(t=this.uploader.type),u["a"].getUploader(t)},emit:function(){var t,e=[],i=Object(l["a"])(this.list);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(null!=r.status&&"done"!==r.status)return;"string"===typeof r?e.push(r):e.push(r.value)}}catch(s){i.e(s)}finally{i.f()}var a=e;1===this.limit&&(a=e&&e.length>0?e[0]:void 0),this.emitValue=a,this.$emit("input",a)}}},f=d,h=(i("7ed9"),i("2877")),g=Object(h["a"])(f,r,a,!1,null,null,null);e["default"]=g.exports}}]);